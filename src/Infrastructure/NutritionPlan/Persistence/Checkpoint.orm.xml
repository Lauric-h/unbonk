<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                          https://www.doctrine-project.org/schemas/orm/doctrine-mapping.xsd">

    <entity name="App\Domain\NutritionPlan\Entity\Checkpoint" table="checkpoint">
        <id name="id" type="string" />
        <field name="externalId" type="string" column="external_id" nullable="true"/>
        <field name="name" type="string"/>
        <field name="location" type="string"/>
        <field name="distanceFromStart" type="integer" column="distance_from_start"/>
        <field name="ascentFromStart" type="integer" column="ascent_from_start"/>
        <field name="descentFromStart" type="integer" column="descent_from_start"/>
        <field name="assistanceAllowed" type="boolean" column="assistance_allowed"/>
        <field name="cutoffTime" type="datetime_immutable" column="cutoff_time" nullable="true"/>
        <field name="type" type="string" enum-type="App\Domain\NutritionPlan\Entity\CheckpointType"/>

        <many-to-one field="importedRace" target-entity="App\Domain\NutritionPlan\Entity\ImportedRace" inversed-by="checkpoints">
            <join-column name="imported_race_id" referenced-column-name="id" nullable="false" on-delete="CASCADE" />
        </many-to-one>
    </entity>

</doctrine-mapping>
